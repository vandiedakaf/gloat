language: java
services: mysql
jdk:
- oraclejdk8
before_install:
- chmod +x gradlew
# prevents ./gradlew assemble from running
install: true
before_cache:
- rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
- rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
  - "$HOME/.gradle/caches/"
  - "$HOME/.gradle/wrapper/"
before_script: mysql -uroot -e "CREATE DATABASE gloat"
script: "./gradlew build"
deploy:
  provider: heroku
  api_key:
    secure: f3gG/Rsle4h4AvlfVZg+zYGK0l4EOvzVGUFm0K5GYsKVkwm7AIvnBBYigPY6NYd5v6fIcUHKxS48f4GNBk53M5tg0HYZrvU3V3HtAUaWGXCg32+guOgHxF8gkw/uKpZh3wtckCNf+TcBex7H5ZvK/Ih0JSEl1boeIx+09dTBz43OmTsOfTTbxDEw5+Fj9SYfyTIy3FiAtxMUx5iLSILM+sEYg6F9UEFjlGwe47XLZLKsqQlqWCrAwEH+tU1iVBcXmmj4PeA1JnEhWM6TXIk/aaaaVAykDLybd/CRHfYY+Y6EZIw4uxmTZBgV/hQ/KCEwUTUU45xPL//1jf2rM405ptAPvBEH1iNeAQKTLxR2nyphcnLzaqRFC0YOnlqXie9OhB8Oq88CnMVEQ8prV6e7UOjmMx0X3oCpQukGhzkr6mZ70BrhpWRTrX9GjMNlxMVCKyU6G81PXmWFwfB/Wlo6Mvcjat1i1OKyVWj80uhbnrbup6ikNsnnbi2PDrqk+t18zmudU5tC+GXwXSMBl1k7AVWRXy/fSy6O9HNLq6tqjEUxP/d5Wel6Kz02y1hZkOIC6gZ5tQ//c/FKarVs6U802c/APOZpeg+Ih7iTiqF47aUAQx6oa3hyFfn4isehn3Mjjrgcg05dZd1fkb2KXhoNky7nVcurWA02py8F5Tq+pNg=
  app: gloat
  run: "gradle -Dspring.profiles.active=local bootRun"
  on:
    repo: vandiedakaf/gloat
branches:
  only:
  - master
  - develop
after_success:
- "./gradlew jacocoTestReport coveralls"
notifications:
  email: false
